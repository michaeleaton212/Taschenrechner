<Window x:Class="Calculator.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Calculator"
        Width="360"
        Height="650"
        MinHeight="650"
        MinWidth="360"
        WindowStartupLocation="CenterScreen"
        KeyDown="Window_KeyDown"
        TextInput="Window_TextInput"
        Loaded="Window_Loaded"
        SizeChanged="Window_SizeChanged"
        Focusable="True">
    <!--Window_SizeChanged call the method when the size of the window changes-->

    <!-- Root-Grid -->
    <Grid Margin="10">
        <!-- Zeilenaufteilung -->
        <Grid.RowDefinitions>
            <RowDefinition Height="3*"/>
            <RowDefinition Height="10*"/>
            <RowDefinition Height="5*"/>
        </Grid.RowDefinitions>

        <!-- Column layout: left main area, right memory -->
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <!-- left main area -->
            <ColumnDefinition x:Name="RightPaneColumn" Width="220" />
            <!-- right sidebar -->
        </Grid.ColumnDefinitions>

        <!-- Display -->
        <Border Grid.Row="0" Grid.Column="0" Margin="0" Padding="10" BorderThickness="0,0,0,1" BorderBrush="LightGray">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Label x:Name="MemoryLabel"
                       Grid.Row="0"
                       Content=""
                       FontSize="14"
                       Foreground="DarkSlateGray"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Bottom"
                       Padding="0,0,5,0"
                       Visibility="Collapsed"/>

                <TextBox x:Name="Display"
                         Grid.Row="1"
                         FontSize="32"
                         IsReadOnly="True"
                         HorizontalContentAlignment="Right"
                         TextAlignment="Right"
                         FlowDirection="RightToLeft"
                         VerticalContentAlignment="Center"
                         BorderThickness="0"
                         Background="Transparent"
                         Margin="0"
                         Text="{Binding DisplayText}"/>
            </Grid>
        </Border>

        <!-- Keypad -->
        <Grid Grid.Row="1" Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button Content="MC" Grid.Row="1" Grid.Column="0" Margin="3" Click="ButtonClickMemory"/>
            <Button Content="MR" Grid.Row="1" Grid.Column="1" Margin="3" Click="ButtonClickMemory"/>
            <Button Content="MS" Grid.Row="1" Grid.Column="2" Margin="3" Click="ButtonClickMemory"/>
            <Button Content="←"  Grid.Row="1" Grid.Column="3" Margin="3" Click="ButtonClickBackspace"/>

            <Button Content="7" Grid.Row="2" Grid.Column="0" Margin="3" Click="ButtonClickNumber"/>
            <Button Content="8" Grid.Row="2" Grid.Column="1" Margin="3" Click="ButtonClickNumber"/>
            <Button Content="9" Grid.Row="2" Grid.Column="2" Margin="3" Click="ButtonClickNumber"/>
            <Button Content="/" Grid.Row="2" Grid.Column="3" Margin="3" Click="ButtonClickOperator"/>

            <Button Content="4" Grid.Row="3" Grid.Column="0" Margin="3" Click="ButtonClickNumber"/>
            <Button Content="5" Grid.Row="3" Grid.Column="1" Margin="3" Click="ButtonClickNumber"/>
            <Button Content="6" Grid.Row="3" Grid.Column="2" Margin="3" Click="ButtonClickNumber"/>
            <Button Content="*" Grid.Row="3" Grid.Column="3" Margin="3" Click="ButtonClickOperator"/>

            <Button Content="1" Grid.Row="4" Grid.Column="0" Margin="3" Click="ButtonClickNumber"/>
            <Button Content="2" Grid.Row="4" Grid.Column="1" Margin="3" Click="ButtonClickNumber"/>
            <Button Content="3" Grid.Row="4" Grid.Column="2" Margin="3" Click="ButtonClickNumber"/>
            <Button Content="-" Grid.Row="4" Grid.Column="3" Margin="3" Click="ButtonClickOperator"/>

            <Button Content="AC" Grid.Row="5" Grid.Column="0" Margin="3" Click="ButtonClickAllClear"/>
            <Button Content="0"  Grid.Row="5" Grid.Column="1" Margin="3" Click="ButtonClickNumber"/>
            <Button Content="."  Grid.Row="5" Grid.Column="2" Margin="3" Click="ButtonClickNumber"/>
            <Button Content="+"  Grid.Row="5" Grid.Column="3" Margin="3" Click="ButtonClickOperator"/>

            <Button Content="M+" Grid.Row="6" Grid.Column="1" Margin="3" Click="ButtonClickMemory"/>
            <Button Content="M-" Grid.Row="6" Grid.Column="2" Margin="3" Click="ButtonClickMemory"/>
            <Button Content="="  Grid.Row="6" Grid.Column="3" Margin="3" Click="ButtonClickEquals"/>
        </Grid>

        <!-- Verlauf -->
        <Grid Grid.Row="2" Grid.Column="0" Margin="0,10,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Stretch">
                <TextBlock Text="Verlauf" FontWeight="SemiBold" VerticalAlignment="Center"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Löschen" Margin="8,0,0,0" Padding="8,4" Click="HistoryClear_Click"/>
                </StackPanel>
            </StackPanel>

            <TextBox x:Name="HistoryBox"
                     Grid.Row="1"
                     FontSize="14"
                     IsReadOnly="True"
                     TextWrapping="Wrap"
                     VerticalScrollBarVisibility="Auto"
                     HorizontalAlignment="Stretch"
                     TextAlignment="Left"
                     AcceptsReturn="True"
                     VerticalAlignment="Stretch"/>
        </Grid>

        <!-- Memory Panel, own grid -->
        <Border x:Name="MemoryPanel"
                Grid.Row="1" Grid.Column="1" Grid.RowSpan="2"
                Margin="10,0,0,0"
                Padding="8"
                BorderBrush="#DDD" BorderThickness="1" CornerRadius="6"
                MinWidth="170">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="0,0,0,6">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Memory"
                               Grid.Row="0"
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"
                               Margin="0,0,0,4"/>

                    <StackPanel Grid.Row="1" Orientation="Vertical">
                        <Button Content="Auswahl löschen"
                                Margin="0,2"
                                Padding="4,3"
                                FontSize="11"
                                Click="MemoryDelete_Selected"/>
                        <Button Content="Alle Löschen"
                                Margin="0,2"
                                Padding="4,3"
                                FontSize="11"
                                Click="MemoryDeleteAll_Click"/>
                    </StackPanel>
                </Grid>

                <ListBox x:Name="MemoryListBox"
                         Grid.Row="1"
                         Margin="0,6,0,6"
                         MouseDoubleClick="MemoryListBox_MouseDoubleClick">
                    <ListBox.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="Einfügen" Click="MemoryInsertSelected_Click"/>
                            <MenuItem Header="Löschen"  Click="MemoryDeleteAll_Click"/>
                        </ContextMenu>
                    </ListBox.ContextMenu>
                </ListBox>
            </Grid>
        </Border>

    </Grid>
</Window>
